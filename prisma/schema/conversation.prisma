model Conversation {
  id             String    @id @default(cuid())
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
  senderUserName String    @unique
  model          Model     @relation(fields: [modelId], references: [id])
  modelId        String
  messages       Message[]

  @@index([modelId])
}

model Message {
  id                  String             @id @default(cuid())
  createdAt           DateTime           @default(now())
  updatedAt           DateTime           @updatedAt
  actualtSendTime     DateTime           @default(now())
  messageIndex        Int
  isFromSender        Boolean
  type                MessageType
  content             String
  picture             PictureFromSender? @relation(fields: [pictureFromSenderId], references: [id])
  conversation        Conversation       @relation(fields: [conversationId], references: [id])
  conversationId      String
  pictureFromSenderId Int?

  @@index([pictureFromSenderId])
  @@index([conversationId])
}

model PictureFromSender {
  id                    Int       @id @default(autoincrement())
  url                   String
  verySuggestiveScore   Float
  suggestiveScore       Float
  mildlySuggestiveScore Float
  Message               Message[]
}

enum MessageType {
  text
  picture
}
